"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[67],{9067:(l,n,t)=>{t.r(n),t.d(n,{DocsAngularComponent:()=>i});var r=t(1917),c=t(2309),e=t(4650);let i=(()=>{class a{constructor(){this.html='<h1 id="state-adaptangular">@state-adapt/angular</h1>\n<h2 id="peer-dependencies">Peer Dependencies</h2>\n<p><a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/docs/core\'})); void(0)">@state-adapt/core</a></p>\n<p><a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/docs/rxjs\'})); void(0)">@state-adapt/rxjs</a></p>\n<h2 id="index">Index</h2>\n<p><a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/angular/docs/angular#defaultstoreprovider\'})); void(0)"><code>defaultStoreProvider</code></a></p>\n<p><a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/angular/docs/angular#providestore\'})); void(0)"><code>provideStore</code></a></p>\n<p><a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/angular/docs/angular#adapt\'})); void(0)"><code>adapt</code></a></p>\n<p><a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/angular/docs/angular#watch\'})); void(0)"><code>watch</code></a></p>\n<p><a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/angular/docs/angular#adaptinjectable\'})); void(0)"><code>adaptInjectable</code></a></p>\n<h2 id="migration-guide">Migration Guide</h2>\n<p><a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/angular/docs/angular#200\'})); void(0)">2.0.0</a></p>\n<h2 id="defaultstoreprovider"><code>defaultStoreProvider</code></h2>\n<p>  <code>defaultStoreProvider</code> is the default provider for <a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/docs/rxjs#stateadapt\'})); void(0)"><code>StateAdapt</code></a>, and\n  is the easiest way to get started with StateAdapt in Angular. Simply add\n  <code>defaultStoreProvider</code> to your <code>providers</code> array in your <code>AppModule</code> or <code>main.ts</code> file,\n  and you can use <a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/angular/docs/angular#adapt\'})); void(0)"><code>adapt</code></a> and <a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/angular/docs/angular#watch\'})); void(0)"><code>watch</code></a> in your components and services.</p>\n<p>  Use <a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/angular/docs/angular#providestore\'})); void(0)"><code>provideStore</code></a> for more advanced configuration.</p>\n<h4 id="example-using-defaultstoreprovider-for-basic-setup">Example: Using <code>defaultStoreProvider</code> for basic setup</h4>\n<pre><code class="language-ts">import { NgModule } from &#39;@angular/core&#39;;\nimport { BrowserModule } from &#39;@angular/platform-browser&#39;;\nimport { defaultStoreProvider } from &#39;@state-adapt/angular&#39;;\n\nimport { AppComponent } from &#39;./app.component&#39;;\n\n@NgModule({\n  imports: [BrowserModule],\n  declarations: [AppComponent],\n  providers: [defaultStoreProvider],\n})\nexport class AppModule {}\n</code></pre>\n<h4 id="example-using-defaultstoreprovider-in-a-maints-file">Example: Using <code>defaultStoreProvider</code> in a main.ts file</h4>\n<pre><code class="language-ts">import { bootstrapApplication } from &#39;@angular/platform-browser&#39;;\nimport { defaultStoreProvider } from &#39;@state-adapt/angular&#39;;\n\nimport { AppComponent } from &#39;./app/app.component&#39;;\n\nbootstrapApplication(AppComponent, {\n  providers: [\n    defaultStoreProvider,\n    // ...\n  ]\n});\n</code></pre>\n<h2 id="providestore"><code>provideStore</code></h2>\n<p>  <code>provideStore</code> takes in a <a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/docs/rxjs#configurestateadaptoptions\'})); void(0)"><code>ConfigureStateAdaptOptions</code></a> object and\n  returns a provider for <a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/docs/rxjs#stateadapt\'})); void(0)"><code>StateAdapt</code></a> that you can add\n  to the <code>providers</code> array in your <code>AppModule</code> or <code>main.ts</code> file to make\n  <code>adapt</code> and <code>watch</code> available to use in your components and services.</p>\n<h4 id="example-using-providestore-in-appmodule-for-devtools-setup-without-selectors">Example: Using <code>provideStore</code> in AppModule for devtools setup without selectors</h4>\n<pre><code class="language-ts">import { NgModule } from &#39;@angular/core&#39;;\nimport { BrowserModule } from &#39;@angular/platform-browser&#39;;\nimport { actionSanitizer, stateSanitizer } from &#39;@state-adapt/core&#39;;\nimport { provideStore } from &#39;@state-adapt/angular&#39;;\n\nimport { AppComponent } from &#39;./app.component&#39;;\n\n@NgModule({\n  imports: [BrowserModule],\n  declarations: [AppComponent],\n  providers: [\n    provideStore({\n      devtools: (window as any)?.__REDUX_DEVTOOLS_EXTENSION__?.({\n        actionSanitizer,\n        stateSanitizer,\n      }),\n      showSelectors: false,\n    }),\n  ],\n})\nexport class AppModule {}\n</code></pre>\n<h4 id="example-using-providestore-in-a-maints-file-for-no-devtools">Example: Using <code>provideStore</code> in a main.ts file for no devtools</h4>\n<pre><code class="language-ts">import { bootstrapApplication } from &#39;@angular/platform-browser&#39;;\nimport { actionSanitizer, stateSanitizer } from &#39;@state-adapt/core&#39;;\nimport { provideStore } from &#39;@state-adapt/angular&#39;;\n\nimport { AppComponent } from &#39;./app/app.component&#39;;\n\nbootstrapApplication(AppComponent, {\n  providers: [\n    provideStore({}),\n    // ...\n  ]\n});\n</code></pre>\n<h2 id="adapt"><code>adapt</code></h2>\n<blockquote>\n<p>Copilot tip: Copy examples into your file or click to definition to open file with context for better Copilot suggestions.</p>\n</blockquote>\n<p>  <code>adapt</code> wraps <a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/angular/docs/angular#adapt\'})); void(0)"><code>adapt</code></a>, calling <code>inject(StateAdapt)</code> to get the instance of <a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/docs/rxjs#stateadapt\'})); void(0)"><code>StateAdapt</code></a> to use.</p>\n<p>  <code>adapt</code> creates a store that will manage state while it has subscribers.</p>\n<h3 id="example-initialstate-only">Example: initialState only</h3>\n<p>  <code>adapt(initialState)</code></p>\n<p>  The simplest way to use <code>adapt</code> is to only pass it an initial state. <code>adapt</code> returns a store object that is ready to start managing state once it has subscribers.\n  The store object comes with <code>set</code> and <code>reset</code> methods for updating state, and a <code>state$</code> observable of the store&#39;s state.</p>\n<pre><code class="language-typescript">export class MyComponent {\n  name = adapt(&#39;John&#39;);\n\n  constructor() {\n    this.name.state$.subscribe(console.log); // logs &#39;John&#39;\n    this.name.set(&#39;Johnsh&#39;); // logs &#39;Johnsh&#39;\n    this.name.reset(); // logs &#39;John&#39;\n  }\n}\n</code></pre>\n<p>  Usually you won&#39;t manually subscribe to state like this, but you can if you want the store to immediately start managing state\n  and never clean it up.</p>\n<h3 id="example-using-an-adapter">Example: Using an adapter</h3>\n<p>  <code>adapt(initialState, adapter)</code></p>\n<p>  You can also pass in a state <a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/docs/core#adapter\'})); void(0)"><code>Adapter</code></a> object to customize the state change functions and selectors.</p>\n<pre><code class="language-typescript">export class MyComponent {\n  name = adapt(&#39;John&#39;, {\n    concat: (state, payload: string) =&gt; state + payload,\n    selectors: {\n      length: state =&gt; state.length,\n    },\n  });\n\n  constructor() {\n    this.name.state$.subscribe(console.log); // Logs &#39;John&#39;\n    this.name.length$.subscribe(console.log); // Logs 4\n    this.name.concat(&#39;sh&#39;); // logs &#39;Johnsh&#39; and 6\n    this.name.reset(); // logs &#39;John&#39; and 4\n  }\n}\n</code></pre>\n<h3 id="example-using-adaptoptions">Example: Using <code>AdaptOptions</code></h3>\n<p>  <code>adapt(initialState, { adapter, sources, path })</code></p>\n<p>  You can also define an adapter, sources, and/or a state path as part of an <code>AdaptOptions</code> object.</p>\n<p>  Sources allow the store to declaratively react to external events rather than being commanded\n  by imperative callback functions.</p>\n<pre><code class="language-typescript">export class MyService {\n  tick$ = interval(1000).pipe(toSource(&#39;tick$&#39;));\n\n  clock = adapt(0, {\n    adapter: {\n      increment: state =&gt; state + 1,\n    },\n    sources: this.tick$, // or [this.tick$], or { set: this.tick$ }, or { set: [this.tick$] }\n    path: &#39;clock&#39;,\n  });\n\n  constructor() {\n    this.clock.state$.subscribe(console.log); // Logs 0, 1, 2, 3, etc.\n  }\n}\n</code></pre>\n<p>  There are 4 possible ways sources can be defined:</p>\n<p>  1. A source can be a single <a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/docs/rxjs#source\'})); void(0)"><code>Source</code></a> or <a href="https://rxjs.dev/guide/observable">Observable</a>&lt;<a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/docs/core#action\'})); void(0)"><code>Action</code></a>&lt;<code>State</code>&gt;&gt;. When the source emits, it triggers the store&#39;s <code>set</code> method\n  with the payload.</p>\n<h4 id="example-single-source">Example: Single source</h4>\n<pre><code class="language-typescript">export class MyService {\n  nameChange$ = new Source&lt;string&gt;(&#39;nameChange$&#39;);\n\n  name = adapt(&#39;John&#39;, {\n    sources: this.nameChange$,\n    path: &#39;name&#39;,\n  });\n\n  constructor() {\n    this.name.state$.subscribe(console.log); // Logs &#39;John&#39;\n    this.nameChange$.next(&#39;Johnsh&#39;); // logs &#39;Johnsh&#39;\n  }\n}\n</code></pre>\n<p>  2. A source can be an array of <a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/docs/rxjs#source\'})); void(0)"><code>Source</code></a> or <a href="https://rxjs.dev/guide/observable">Observable</a>&lt;<a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/docs/core#action\'})); void(0)"><code>Action</code></a>&lt;<code>State</code>&gt;&gt;. When any of the sources emit, it triggers the store&#39;s <code>set</code>\n    method with the payload.</p>\n<h4 id="example-array-of-sources">Example: Array of sources</h4>\n<pre><code class="language-typescript">export class MyService {\n  nameChange$ = new Source&lt;string&gt;(&#39;nameChange$&#39;);\n  nameChange2$ = new Source&lt;string&gt;(&#39;nameChange2$&#39;);\n\n  name = adapt(&#39;John&#39;, {\n    sources: [this.nameChange$, this.nameChange2$],\n    path: &#39;name&#39;,\n  });\n\n  constructor() {\n    this.name.state$.subscribe(console.log); // Logs &#39;John&#39;\n    this.nameChange$.next(&#39;Johnsh&#39;); // logs &#39;Johnsh&#39;\n    this.nameChange2$.next(&#39;Johnsh2&#39;); // logs &#39;Johnsh2&#39;\n  }\n}\n</code></pre>\n<p>  3. A source can be an object with keys that match the names of the <a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/docs/core#adapter\'})); void(0)"><code>Adapter</code></a> state change functions, with a corresponding source or array of\n  sources that trigger the store&#39;s reaction with the payload.</p>\n<h4 id="example-object-of-sources">Example: Object of sources</h4>\n<pre><code class="language-typescript">export class MyService {\n  nameChange$ = new Source&lt;string&gt;(&#39;nameChange$&#39;);\n  nameReset$ = new Source&lt;void&gt;(&#39;nameReset$&#39;);\n\n  name = adapt(&#39;John&#39;, {\n    sources: {\n      set: this.nameChange$,\n      reset: this.nameReset$,\n    },\n    path: &#39;name&#39;,\n  });\n\n  constructor() {\n    this.name.state$.subscribe(console.log); // Logs &#39;John&#39;\n    this.nameChange$.next(&#39;Johnsh&#39;); // logs &#39;Johnsh&#39;\n    this.nameReset$.next(); // logs &#39;John&#39;\n  }\n}\n</code></pre>\n<p>  4. A source can be a function that takes in a detached store (result of calling <a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/angular/docs/angular#watch\'})); void(0)"><code>watch</code></a>) and returns any of the above\n  types of sources.</p>\n<h4 id="example-function-that-returns-a-source">Example: Function that returns a source</h4>\n<pre><code class="language-typescript">export class MyService {\n  name = adapt(&#39;John&#39;, {\n    sources: store =&gt; store.state$.pipe(\n      delay(1000),\n      map(name =&gt; `${name}sh`),\n      toSource(&#39;recursive nameChange$&#39;),\n    ),\n    path: &#39;name&#39;,\n  });\n\n  constructor() {\n    this.name.state$.subscribe(console.log); // Logs &#39;John&#39;\n    // logs &#39;Johnsh&#39; after 1 second, then &#39;Johnshsh&#39; after 2 seconds, etc.\n  }\n}\n</code></pre>\n<p>  Defining a path alongside sources is recommended to enable debugging with Redux DevTools. It&#39;s easy to trace\n  singular state changes caused by user events, but it&#39;s much harder to trace state changes caused by RxJS streams.</p>\n<p>  The path string specifies the location in the global store you will find the state for the store being created\n  (while the store has subscribers). StateAdapt splits this string at periods <code>&#39;.&#39;</code> to create an object path within\n  the global store. Here are some example paths and the resulting global state objects:</p>\n<h4 id="example-paths-and-global-state">Example: Paths and global state</h4>\n<pre><code class="language-typescript">export class MyComponent {\n  store = adapt(0, { path: &#39;number&#39; });\n\n  constructor() {\n    this.store.state$.subscribe();\n    // global state: { number: 0 }\n  }\n}\n</code></pre>\n<pre><code class="language-typescript">export class MyComponent {\n  store = adapt(0, { path: &#39;featureA.number&#39; });\n\n  constructor() {\n    this.store.state$.subscribe();\n    // global state: { featureA: { number: 0 } }\n  }\n}\n</code></pre>\n<pre><code class="language-typescript">export class MyComponent {\n  store = adapt(0, { path: &#39;featureA.featureB.number&#39; });\n\n  constructor() {\n    this.store.state$.subscribe();\n    // global state: { featureA: { featureB: { number: 0 } } }\n  }\n}\n</code></pre>\n<p>  Each store completely owns its own state. If more than one store tries to use the same path, StateAdapt will throw this error:</p>\n<p>  <code>Path &#39;${path}&#39; collides with &#39;${existingPath}&#39;, which has already been initialized as a state path.</code></p>\n<p>  This applies both to paths that are identical as well as paths that are subtrings of each other. For example, if <code>&#39;featureA&#39;</code>\n  is already being used by a store and then another store tried to initialize at <code>&#39;featureA.number&#39;</code>, that error would be thrown.</p>\n<p>  To help avoid this error, StateAdapt provides a <a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/docs/core#getid\'})); void(0)"><code>getId</code></a> function that can be used to generate unique paths:</p>\n<h4 id="example-getid-for-unique-paths">Example: getId for unique paths</h4>\n<pre><code class="language-typescript">import { getId } from &#39;@state-adapt/core&#39;;\n\nexport class MyService {\n  store1 = adapt(0, { path: &#39;number&#39; + getId() });\n  store2 = adapt(0, { path: &#39;number&#39; + getId() });\n\n  constructor() {\n    this.store1.state$.subscribe();\n    this.store2.state$.subscribe();\n    // global state includes both: { number0: 0, number1: 0 }\n  }\n}\n</code></pre>\n<h3 id="remember">Remember!</h3>\n<p>  The store needs to have subscribers in order to start managing state.</p>\n<h2 id="watch"><code>watch</code></h2>\n<blockquote>\n<p>Copilot tip: Copy examples into your file or click to definition to open file with context for better Copilot suggestions.</p>\n</blockquote>\n<p>  <code>watch</code> wraps <a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/docs/rxjs#stateadaptwatch\'})); void(0)"><code>StateAdapt.watch</code></a>, calling <code>inject(StateAdapt)</code> to get the instance of <a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/docs/rxjs#stateadapt\'})); void(0)"><code>StateAdapt</code></a> to use.</p>\n<p>  <code>watch</code> returns a detached store (doesn&#39;t chain off of sources). This allows you to watch state without affecting anything.\n  It takes 2 arguments: The path of the state you are interested in, and the adapter containing the selectors you want to use.</p>\n<pre><code class="language-tsx">watch(path, adapter)\n</code></pre>\n<p>  path \u2014 Object path in Redux Devtools</p>\n<p>  adapter \u2014 Object with state change functions and selectors</p>\n<h3 id="usage">Usage</h3>\n<p>  <code>watch</code> enables accessing state without subscribing to sources. For example, if your adapter manages the loading state\n  for an HTTP request and you need to know if the request is loading before the user is interested in the data,\n  <code>watch</code> can give you access to it without triggering the request.</p>\n<h4 id="example-accessing-loading-state">Example: Accessing loading state</h4>\n<pre><code class="language-tsx">watch(&#39;data&#39;, httpAdapter).loading$.subscribe(console.log);\n</code></pre>\n<h2 id="adaptinjectable"><code>adaptInjectable</code></h2>\n<p>  @deprecated Use a service instead. This was an experimental pattern and will be removed in the future.\n  Also see ngxtensions: <a href="https://github.com/nartc/ngxtension-platform/blob/main/libs/ngxtension/create-injection-token/src/create-injection-token.ts">https://github.com/nartc/ngxtension-platform/blob/main/libs/ngxtension/create-injection-token/src/create-injection-token.ts</a></p>\n<p>  Wraps <a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/angular/docs/angular#adapt\'})); void(0)"><code>adapt</code></a> and creates an injectable\n  Can be called outside of a service or component</p>\n<h3 id="example-basic-adaptinjectable">Example: Basic adaptInjectable</h3>\n<pre><code class="language-typescript">export const injectNameStore = adaptInjectable(&#39;John&#39;);\n\n// ...\nexport class AppComponent {\n  name$ = injectNameStore().state$;\n}\n</code></pre>\n<h3 id="example-adaptinjectable-using-dependency-injection">Example: adaptInjectable using dependency injection</h3>\n<pre><code class="language-typescript">export const injectNameStore = adaptInjectable(&#39;John&#39;, {\n  sources: () =&gt; {\n    // Can inject dependencies here\n    const name$ = inject(HttpClient).get&lt;Name&gt;(&#39;api/name&#39;);\n    return name$.pipe(toSource(&#39;name$&#39;));\n  },\n});\n\n// ...\nexport class AppComponent {\n  name$ = injectNameStore().state$;\n}\n</code></pre>\n\x3c!-- cache 6 --\x3e\n\n<h3 id="200">2.0.0</h3>\n<p><a href="https://stackblitz.com/edit/vitejs-vite-bca52l?file=src%2FApp.tsx,src%2FtransformCode.ts">Here is a migrator in StackBlitz</a>\nfor automatic migrating. Use Prettier to format the result.</p>\n<p>The 4 overloads of <a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/docs/rxjs#stateadaptadapt\'})); void(0)"><code>StateAdapt.adapt</code></a> have been removed.\nSince <a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/angular/docs/angular#adapt\'})); void(0)"><code>adapt</code></a> wraps <a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/docs/rxjs#stateadaptadapt\'})); void(0)"><code>StateAdapt.adapt</code></a>,\nthe same changes apply to <a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/angular/docs/angular#adapt\'})); void(0)"><code>adapt</code></a>.\nSee the <a href="javascript:document.dispatchEvent(new CustomEvent(\'routeTo\', {detail: \'/docs/rxjs#200\'})); void(0)">migration guide for @state-adapt/rxjs</a> for details.</p>\n'}}return a.\u0275fac=function(o){return new(o||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["sa-docs-angular"]],standalone:!0,features:[e.jDz],decls:2,vars:1,consts:[[3,"html"]],template:function(o,p){1&o&&(e.TgZ(0,"sa-content"),e._UZ(1,"sa-html",0),e.qZA()),2&o&&(e.xp6(1),e.Q6J("html",p.html))},dependencies:[c.S,r.XB],encapsulation:2}),a})()}}]);